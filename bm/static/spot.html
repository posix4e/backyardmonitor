<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Spot Timeline</title>
    <link rel="icon"
          href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'/%3E">
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 16px; }
      a { color: #0b6; text-decoration: none; }
      .muted { color: #666; }
      .row { display:flex; gap:16px; align-items:flex-start; flex-wrap:wrap; }
      .card { border:1px solid #e6e6e6; border-radius:10px; padding:12px; box-shadow:0 2px 10px rgba(0,0,0,0.05); background:#fff; }
      .imgbox img { max-width: 260px; border:1px solid #eee; border-radius:8px; display:block; }
      .section h2 { margin: 8px 0; }
      .grid { display:flex; flex-direction:column; gap:8px; }
      .toolbar { display:flex; gap:8px; align-items:center; margin-bottom: 12px; }
      .sp { font-weight:600; }
      .nav { margin-left:auto; display:flex; gap:8px; }
      .badge { display:inline-block; font-size:12px; background:#111; color:#fff; padding:2px 6px; border-radius:10px; opacity:0.85; }
      .kv { font-family: ui-monospace, SFMono-Regular, Menlo, monospace; font-size:12px; white-space: pre-wrap; }
      .rowitem { display:flex; gap:12px; align-items:flex-start; padding:8px; border:1px solid #eee; border-radius:8px; background:#fff; }
      .rowitem img { max-width: 160px; border-radius:6px; border:1px solid #eee; }
      .meta { display:flex; flex-direction:column; gap:4px; }
      .actions { display:flex; gap:8px; }
      .highlight { outline: 2px solid #0b6; }
    </style>
  </head>
  <body>
    <div class="toolbar">
      <a href="/" title="Back">⬅ Back</a>
      <div>
        Spot <span id="spot_id" class="sp"></span> · Timeline
      </div>
      <div class="nav">
        <label class="muted">
          Name
          <input id="spot_name"
                 type="text"
                 placeholder="Spot name"
                 style="width:180px" />
        </label>
        <label class="muted">
          Category
          <select id="spot_category" style="width:130px;">
            <option value="">(default)</option>
            <option value="gate">Gate</option>
            <option value="parking">Parking</option>
          </select>
        </label>
        <label class="muted">
          Override: Change threshold
          <input id="spot_override_thresh" type="number" style="width:120px;" />
        </label>
        <label class="muted">
          Override: Stable window (ms)
          <input id="spot_stable_ms" type="number" style="width:140px;" />
        </label>
        <button id="save_cfg_btn" title="Save spot settings">Save</button>
        <button id="clear_spot_btn"
                title="Delete all events for this spot"
                style="color:#b00000"
                onclick="clearSpotHistory()">Clear History</button>
        <label>
          Limit
          <input id="limit" type="number" value="60" min="1" style="width:80px;" />
        </label>
        <button id="reload_btn">Load</button>
      </div>
    </div>
    <div id="explain" class="muted kv"></div>
    <div class="section" style="margin-top:8px;">
      <div class="grid" id="timeline"></div>
    </div>
    <script src="/static/js/spot.js"></script>
  </body>
</html>
